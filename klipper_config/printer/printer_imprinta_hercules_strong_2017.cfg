################################################################################
# Board: Arduino Mega ATMEGA 2560 with RAMPS v 1.4 and TMC_2209 none UART
# Printer: Imprinta Hercules Strong 2017
# Config by SCRIV
################################################################################
# WARNING! DO NOT EDIT THIS FILE!
# To override settings from this file, you can copy and paste the relevant sections into your printer.cfg and change it there.
################################################################################

# Documentation
# https://www.klipper3d.org/Config_Reference.html

################################################################################
# X, Y, Z
################################################################################

[stepper_x]
step_pin: PF0
dir_pin: PF1                                             # with stock A4818 this must be: !PF1
enable_pin: !PD7
rotation_distance: 32
microsteps: 16
endstop_pin: ^!PE5
position_min: 0                                          # home offset, measure yours or disable for no offset
#step_distance: 0.0125
position_endstop: 0                                      # home offset, measure yours or set '0' for no offset
position_max: 300                                        # X-axis bed size
homing_speed: 30
second_homing_speed: 10
#homing_retract_dist: 5                                  # disable for head retraction after homing

[stepper_y]
step_pin: PF6
dir_pin: !PF7                                            # with stock A4818 this must be: PF7
enable_pin: !PF2
rotation_distance: 32
microsteps: 16
endstop_pin: ^!PJ1
position_min: 0
#step_distance: 0.0125                                   # home offset, measure yours or disable for no offset
position_endstop: 0                                      # home offset, measure yours or set '0' for no offset
position_max: 370                                        # Y-axis bed size
homing_speed: 30
homing_positive_dir: false
second_homing_speed: 10
#homing_retract_dist: 5                                  # disable for head retraction after homing

[stepper_z]                                                                     
step_pin: PL3
dir_pin: PL1 #With stock A4818 this must be: !PL1
enable_pin: !PK0
rotation_distance: 8
microsteps: 16
endstop_pin: ^!PD3
position_max: 400                                        # Z-axis print volume size
homing_speed: 20
second_homing_speed: 5

################################################################################
# E0, HB
################################################################################

[extruder]
step_pin: PA4
dir_pin: !PA6                                            # with stock A4818 this must be: PA6
enable_pin: !PA2
rotation_distance: 30,127                                # (diameter of gear = 11.7 * 3.14) # stock value = 30.13750235449237
gear_ratio: 57:11                                        # Nema 11 stepper motor, 1.8â€¢, with gearbox (gear ratio 5.18:1)
microsteps: 16
nozzle_diameter: 0.800
filament_diameter: 1.750
max_extrude_only_distance: 100                           # Check this out | ~100 direct, ~600 bowden
heater_pin: PB4
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PK5
min_temp: 0
max_temp: 265

[verify_heater extruder]
max_error: 120
#   The maximum "cumulative temperature error" before raising an
#   error. Smaller values result in stricter checking and larger
#   values allow for more time before an error is reported.
#   Specifically, the temperature is inspected once a second and if it
#   is close to the target temperature then an internal "error
#   counter" is reset; otherwise, if the temperature is below the
#   target range then the counter is increased by the amount the
#   reported temperature differs from that range. Should the counter
#   exceed this "max_error" then an error is raised. The default is
#   120.
check_gain_time: 20
#   This controls heater verification during initial heating. Smaller
#   values result in stricter checking and larger values allow for
#   more time before an error is reported. Specifically, during
#   initial heating, as long as the heater increases in temperature
#   within this time frame (specified in seconds) then the internal
#   "error counter" is reset. The default is 20 seconds for extruders
#   and 60 seconds for heater_bed.
hysteresis: 5
#   The maximum temperature difference (in Celsius) to a target
#   temperature that is considered in range of the target. This
#   controls the max_error range check. It is rare to customize this
#   value. The default is 5.
heating_gain: 2
#   The minimum temperature (in Celsius) that the heater must increase
#   by during the check_gain_time check. It is rare to customize this
#   value. The default is 2.

[heater_bed]
heater_pin: PH5
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PK6
min_temp: 0
max_temp: 130

################################################################################
# Fans
################################################################################

[fan]
pin: PH6
max_power: 1.0
shutdown_speed: 0.0
cycle_time: 0.01
kick_start_time:0.100
off_below: 0.15

#[fan_generic chamber_fan]
#pin: 
#max_power: 1.0
#shutdown_speed: 0.0
#cycle_time: 0.01
#kick_start_time:0.100
#off_below: 0.15

#[controller_fan my_controller_fan]
#pin:PH4
#max_power:1.0
#shutdown_speed:1.0
#cycle_time:0.01
#kick_start_time:0.100
#off_below:0.0
#fan_speed: 1.0
#idle_timeout:30
#idle_speed:1.0
#heater:extruder

################################################################################
# Printer
################################################################################

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 3000
max_accel_to_decel: 1500
max_z_velocity: 20
max_z_accel: 300

################################################################################
# LCD, beeper, encoder
################################################################################

[display]
lcd_type: st7920
cs_pin: EXP1_4
sclk_pin: EXP1_5
sid_pin: EXP1_3
encoder_pins: ^EXP2_3, ^!EXP2_5
click_pin: ^!EXP1_2
#kill_pin: ^!EXP2_8

################################################################################
# Optional G-Code features
################################################################################

[virtual_sdcard]
path: ~/gcode_files

[pause_resume]

[display_status]

[firmware_retraction]
retract_speed: 40
unretract_speed: 40

[respond]

################################################################################
# Bed leveling
################################################################################

# Reference: distance from bed edge to screw center is 35mm on X axis and 32.5mm on Y.
# Bed size is 320x420mm and print area size is 300x370mm.

[bed_screws]
screw1: 53,0    #61,0 - real center of screw
screw1_name:FL
screw2: 254,0   #244,0 -/-
screw2_name:FR
screw3: 55,370  #61,370 -/-
screw3_name:RL
screw4: 254,370 #243,370 -/-
screw4_name:RR
horizontal_move_z: 1
speed: 100

################################################################################